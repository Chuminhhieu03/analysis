{% extends 'base.html' %}
{% load static %}
{% block title %}Thêm khách hàng{% endblock title %}
{% block content %}
<div class="content-wrapper">
  <div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Trang thêm khách hàng</h4>
          <form class="forms-sample"  method="POST" action="/customer/add" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group">
              <label for="exampleInputUsername1">Tên</label>
              <input name="name" type="text" class="form-control" placeholder="Nhập tên">
            </div>
            <div class="form-group">
              <label for="exampleInputUsername1">Số điện thoại</label>
              <input name="phone" type="text" class="form-control" placeholder="Nhập số điện thoại">
            </div>
            <div class="form-group">
              <label>Địa chỉ</label>
              <input name="address" type="text" class="form-control" placeholder="Nhập địa chỉ">
            </div>
            <div class="form-group">
              <label>Tải ảnh lên</label>
                <input type="file" name="image" class="fileupload-default" id="customer_image" hidden>
                <div class="input-group col-xs-12">
                  <input type="" class="form-control file-upload-info" disabled="" placeholder="Chọn ảnh" id="customer_image_text">
                  <span class="input-group-append">
                    <button class="file-upload-browse btn btn-primary" id="upload_customer_image"  type="button">Chọn thư mục</button>
                  </span>
                </div>
            </div>
            <div class="form-group">
              <label>Hiển thị ảnh đại diện</label>
              <div class="col-sm-12 flex">
                <div style="display: flex; justify-content: center;">
                  <img src="{% static 'images/favicon.png' %}" class="img-thumbnail" id="customer_image_preview" style="width: 200px; height: 200px; border-radius: 100%;">
                </div>
              </div>
            </div>
            
            <button type="submit" class="btn btn-primary me-2">Xác nhận</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function () {
  var datepicker = document.querySelector("#datepicker-income-table");
  $(datepicker).datepicker({
      format: "dd/mm/yyyy",
      todayHighlight: true,
      autoclose: true,
    });

    var customer_image = document.getElementById("customer_image");
    var customer_image_text = document.getElementById("customer_image_text");
    var upload_customer_image = document.getElementById("upload_customer_image");
    upload_customer_image.addEventListener("click", function () {
      customer_image.click();
    });
    customer_image.addEventListener("change", function () {
      var file = customer_image.files[0];
      customer_image_text.value = file.name;

      // Create a URL representing the selected file
      var fileURL = URL.createObjectURL(file);

      // Set the URL as the src attribute of the img tag
      customer_image_preview.src = fileURL;
    });

});


</script>
{% endblock content %}